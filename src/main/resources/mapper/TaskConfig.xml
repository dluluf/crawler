<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pinganfu.crawler.data.dao.TaskConfigDao">

    <resultMap id="taskConfig" type="com.pinganfu.crawler.data.model.TaskConfigDO">
        <id column="ID" property="id" />
        <result column="TASK_NAME" property="taskName" />
        <result column="SEED_URL" property="seedUrl" />
        <result column="CRON" property="cron" />
        <result column="URL_CSS_SELECTOR" property="urlCssSelector" />
        <result column="FIELDS_CSS_SELECTOR" property="fieldsCssSelector" />
        <result column="CONTENT_LIST_CSS_SELECTOR" property="contentListCssSelector" />
        <result column="PAGE_SIZE" property="pageSize" />
        <result column="PAGE_PARAMS" property="pageParams" />
        <result column="URL_TEMPLATE" property="urlTemplate" />
    </resultMap>



    <select id="getTaskById" resultType="com.pinganfu.crawler.data.model.TaskConfigDO">
        SELECT *
        FROM TASK_CONFIG
        WHERE
        id= #{id} limit 1
    </select>

    <select id="getAllTask" resultMap="taskConfig">
        SELECT * FROM TASK_CONFIG LIMIT 10;
    </select>

    <!-- 批量插入 -->
    <insert id ="addTaskConfig" >
        insert into TASK_CONFIG
        (ID,TASK_NAME, SEED_URL, CRON, URL_CSS_SELECTOR,
        FIELDS_CSS_SELECTOR,CONTENT_LIST_CSS_SELECTOR,PAGE_SIZE,PAGE_PARAMS,URL_TEMPLATE)
        values
            (
            #{id},
            #{taskName},
            #{seedUrl},
            #{cron},
            #{urlCssSelector},
            #{fieldsCssSelector},
            #{contentListCssSelector},
            #{pageSize},
            #{pageParams},
            #{urlTemplate}
            )

    </insert >

</mapper>